on_actions = {
    on_capitulation = {
	    effect = {
		    if = {
			    limit = {
			        FROM = { tag = KNT }
				}
				WES = {
					country_event = {
						days = 10
						id = WES_event.6
					}
				}
			}
		}
	}
	on_war = {
		effect = {
			if = {
				limit = {
					THIS = {
						has_country_flag = SUS_partisans_active
					}
				}
				THIS = {
					random_owned_controlled_state = {
						create_unit = {
							allow_spawning_on_enemy_provs = yes
							division = "name = \"Resistance Regiment\" division_template = \"Resistance Regiment\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
							owner = SUS
						}
					}	
					random_owned_controlled_state = {
						create_unit = {
							allow_spawning_on_enemy_provs = yes
							division = "name = \"Resistance Regiment\" division_template = \"Resistance Regiment\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
							owner = SUS
						}
					}	
					random_owned_controlled_state = {
						create_unit = {
							allow_spawning_on_enemy_provs = yes
							division = "name = \"Resistance Regiment\" division_template = \"Resistance Regiment\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
							owner = SUS
						}
					}						
				}
			}
		}
	}
	
	on_war = {
		effect = {
			if = {
				limit = {
					AND ={ 
						SUS = {
							has_war_with = MRC
						}
						SUS = {
							has_completed_focus = SUS_supply_the_liberation
						}
					}
				}
				load_oob = SUS_workers_uprising_Mercia
			}
			else_if = {
				limit = {
					SUS = {
						has_war_with = NTH
					}
					SUS = {
						has_completed_focus = SUS_supply_the_liberation
					}
				}
				load_oob = SUS_workers_uprising_Northumbria
			}
			else_if = {
				limit = {
					SUS = {
						has_war_with = EAG
					}
					SUS = {
						has_completed_focus = SUS_supply_the_liberation
					}
				}
				load_oob = SUS_workers_uprising_East_Anglia
			}
		}
	}
	on_monthly = {
		effect = {
			add_to_variable = {
				var = SUS_number_of_agents
				value = SUS_recruitment_of_agents
			}
		}
	}
	on_weekly_SUS = { #SUS_king_absolutistic_rule_spirit
        effect = {
            SUS = {
                set_variable = {
                    var = SUS_ruletype_army_morale_factor_factor
                    value = SUS.party_popularity@left_authoritarianism
                }
				set_variable = {
                    var = SUS_ruletype_political_power_factor
                    value = SUS.party_popularity@left_authoritarianism
                }
				set_variable = {
                    var = SUS_ruletype_recruitable_population_factor
                    value = SUS.party_popularity@left_authoritarianism
                }
                subtract_from_variable = {
                    var = SUS_ruletype_army_morale_factor_factor
                    value = 0.5
                }
                divide_variable = {
                    var = SUS_ruletype_army_morale_factor_factor
                    value = 5
                } 
				subtract_from_variable = {
                    var = SUS_ruletype_political_power_factor
                    value = 0.5
                }
                divide_variable = {
                    var = SUS_ruletype_political_power_factor
                    value = 2
                } 
				subtract_from_variable = {
                    var = SUS_ruletype_recruitable_population_factor
                    value = 0.5
                }
                divide_variable = {
                    var = SUS_ruletype_recruitable_population_factor
                    value = 2
                } 
            }
        }
    }
	on_weekly_SUS = { #SUS_king_parlamental_rule_spirit
        effect = {
            SUS = {
                set_variable = {
                    var = SUS_ruletype_political_advisor_cost_factor
                    value = SUS.party_popularity@left_authoritarianism
                }
				set_variable = {
                    var = SUS_ruletype_consumer_goods_factor
                    value = SUS.party_popularity@left_authoritarianism
                }
				set_variable = {
                    var = SUS_ruletype_production_speed_buildings_factor
                    value = SUS.party_popularity@left_authoritarianism
                }
                subtract_from_variable = {
                    var = SUS_ruletype_political_advisor_cost_factor
                    value = 5
                }
                divide_variable = {
                    var = SUS_ruletype_political_advisor_cost_factor
                    value = -5
                } 
				subtract_from_variable = {
                    var = SUS_ruletype_consumer_goods_factor
                    value = 0.5
                }
                divide_variable = {
                    var = SUS_ruletype_consumer_goods_factor
                    value = -2
                } 
				subtract_from_variable = {
                    var = SUS_ruletype_production_speed_buildings_factor
                    value = 0.5
                }
                divide_variable = {
                    var = SUS_ruletype_production_speed_buildings_factor
                    value = 2
                } 
            }
        }
    }
	on_weekly_SUS = { #SUS Pillars Mechanic
        effect = {
            SUS = {
				#Wessex#
                set_variable = {
                    var = SUS_pillars_wessex_monthly_population
                    value = SUS_purple_var
                }
                set_variable = {
                    var = SUS_pillars_wessex_consumer_goods_factor
                    value = SUS_purple_var
                }
				divide_variable = {
					var = SUS_pillars_wessex_monthly_population
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_wessex_consumer_goods_factor
					value = 400
				}
				multiply_variable = {
					var = SUS_pillars_wessex_consumer_goods_factor
					value = -1
				}
				#Sussex#
                set_variable = {
                    var = SUS_pillars_sussex_production_factory_efficiency
                    value = SUS_red_var
                }
                set_variable = {
                    var = SUS_pillars_sussex_production_speed_buildings
                    value = SUS_red_var
                }
                set_variable = {
                    var = SUS_pillars_sussex_political_advisor_cost_factor
                    value = SUS_red_var
                }
                set_variable = {
                    var = SUS_pillars_sussex_industrial_concern_cost_factor 
                    value = SUS_red_var
                }
                set_variable = {
                    var = SUS_pillars_sussex_economy_cost_factor
                    value = SUS_red_var
                }
				divide_variable = {
					var = SUS_pillars_sussex_production_factory_efficiency
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_sussex_production_speed_buildings
					value = 200
				}
				divide_variable = {
					var = SUS_pillars_sussex_political_advisor_cost_factor
					value = 200
				}
				divide_variable = {
					var = SUS_pillars_sussex_industrial_concern_cost_factor 
					value = 200
				}
				divide_variable = {
					var = SUS_pillars_sussex_economy_cost_factor
					value = 200
				}
				multiply_variable = {
					var = SUS_pillars_sussex_political_advisor_cost_factor
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_sussex_industrial_concern_cost_factor 
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_sussex_economy_cost_factor
					value = -1
				}
				#Kent#
                set_variable = {
                    var = SUS_pillars_kent_research_speed_factor
                    value = SUS_blue_var
                }
                set_variable = {
                    var = SUS_pillars_kent_land_doctrine
                    value = SUS_blue_var
                }
                set_variable = {
                    var = SUS_pillars_kent_air_doctrine
                    value = SUS_blue_var
                }
                set_variable = {
                    var = SUS_pillars_kent_naval_doctrine
                    value = SUS_blue_var
                }
                set_variable = {
                    var = SUS_pillars_kent_land_equipment
                    value = SUS_blue_var
                }
                set_variable = {
                    var = SUS_pillars_kent_air_equipment
                    value = SUS_blue_var
                }
                set_variable = {
                    var = SUS_pillars_kent_naval_equipment
                    value = SUS_blue_var
                }
				divide_variable = {
					var = SUS_pillars_kent_research_speed_factor
					value = 400
				}
				divide_variable = {
					var = SUS_pillars_kent_land_doctrine
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_kent_air_doctrine
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_kent_naval_doctrine
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_kent_land_equipment
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_kent_air_equipment
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_kent_naval_equipment
					value = 100
				}
				multiply_variable = {
					var = SUS_pillars_kent_land_doctrine
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_kent_air_doctrine
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_kent_naval_doctrine
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_kent_land_equipment
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_kent_air_equipment
					value = -1
				}
				multiply_variable = {
					var = SUS_pillars_kent_naval_equipment
					value = -1
				}
				#Essex#
                set_variable = {
                    var = SUS_pillars_essex_trade_opinion_factor
                    value = SUS_yellow_var
                }
				divide_variable = {
					var = SUS_pillars_essex_trade_opinion_factor
					value = 100
				}
				#East Anglia#
                set_variable = {
                    var = SUS_pillars_east_anglia_equipment_capture_factor
                    value = SUS_green_var
                }
                set_variable = {
                    var = SUS_pillars_east_anglia_recruitable_population_factor
                    value = SUS_green_var
                }
				divide_variable = {
					var = SUS_pillars_east_anglia_equipment_capture_factor
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_east_anglia_recruitable_population_factor
					value = 400
				} 				
				#Mercia#
                set_variable = {
                    var = SUS_pillars_mercia_required_garrison_factor
                    value = SUS_indigo_var
                }
				set_variable = {
                    var = SUS_pillars_mercia_army_morale_factor
                    value = SUS_indigo_var
                }
				set_variable = {
                    var = SUS_pillars_political_power_gain
                    value = SUS_indigo_var
                }
				divide_variable = {
					var = SUS_pillars_mercia_required_garrison_factor
					value = 100
				}
				divide_variable = {
					var = SUS_pillars_mercia_army_morale_factor
					value = 800
				}
				divide_variable = {
					var = SUS_pillars_political_power_gain
					value = 100
				}	
				multiply_variable = {
					var = SUS_pillars_mercia_required_garrison_factor
					value = -1
				}				
				#Northumbria#
                set_variable = {
                    var = SUS_pillars_northumbria_factory_start_efficiency
                    value = SUS_orange_var
                }
                set_variable = {
                    var = SUS_pillars_northumbria_army_armor_attack_factor
                    value = SUS_orange_var
                }
                set_variable = {
                    var = SUS_pillars_northumbria_max_efficiency_factor
                    value = SUS_orange_var
                }
				divide_variable = {
					var = SUS_pillars_northumbria_factory_start_efficiency
					value = 400
				}
				divide_variable = {
					var = SUS_pillars_northumbria_army_armor_attack_factor
					value = 1000
				}
				divide_variable = {
					var = SUS_pillars_northumbria_max_efficiency_factor
					value = 400
				}
            }
        }
    }
	on_weekly_SUS = { #SUS Pillars Mechanic 2
		effect = {
			#Dominant Party Thing#
			if = {
				limit = {
					SUS = {
						has_government = socialism
					}
					check_variable = { SUS_red_var > SUS_orange_var }
					check_variable = { SUS_red_var > SUS_yellow_var }
					check_variable = { SUS_red_var > SUS_green_var }
					check_variable = { SUS_red_var > SUS_blue_var }
					check_variable = { SUS_red_var > SUS_indigo_var }
					check_variable = { SUS_red_var > SUS_purple_var }
				}
				if = {
					limit = {
						SUS = {
							has_country_flag = SUS_pillars_balance_nobody
						}
					}
					SUS = {
						add_ideas = SUS_pillars_labourists_dominate
						clr_country_flag = SUS_pillars_balance_nobody
					}
				}
				if = {
					limit = {
						SUS = {
							NOT = {
								has_country_flag = SUS_pillars_balance_nobody
							}
						}
					}
					SUS = {
						swap_ideas = {
							remove_idea = SUS_pillars_outsiders_dominate
							add_idea = SUS_pillars_labourists_dominate
						}
					}
				}
			}
			if = {
				limit = {
					SUS = {
						has_government = socialism
					}
					OR = {
						check_variable = { SUS_red_var < SUS_orange_var }
						check_variable = { SUS_red_var < SUS_yellow_var }
						check_variable = { SUS_red_var < SUS_green_var }
						check_variable = { SUS_red_var < SUS_blue_var }
						check_variable = { SUS_red_var < SUS_indigo_var }
						check_variable = { SUS_red_var < SUS_purple_var }
					}
				}
				if = {
					limit = {
						SUS = {
							has_country_flag = SUS_pillars_balance_nobody
						}
					}
					SUS = {
						add_ideas = SUS_pillars_outsiders_dominate
						clr_country_flag = SUS_pillars_balance_nobody
					}
				}
				if = {
					limit = {
						SUS = {
							NOT = {
								has_country_flag = SUS_pillars_balance_nobody
							}
						}
					}
					SUS = {
						swap_ideas = {
							remove_idea = SUS_pillars_labourists_dominate
							add_idea = SUS_pillars_outsiders_dominate
						}
					}
				}
			}
			if = {
				limit = {
					SUS = {
						has_government = socialism
					}
					OR = {
						NOT = {
							OR = {
								check_variable = { SUS_red_var < SUS_orange_var }
								check_variable = { SUS_red_var < SUS_yellow_var }
								check_variable = { SUS_red_var < SUS_green_var }
								check_variable = { SUS_red_var < SUS_blue_var }
								check_variable = { SUS_red_var < SUS_indigo_var }
								check_variable = { SUS_red_var < SUS_purple_var }
							}
						}
						NOT = {
							check_variable = { SUS_red_var > SUS_orange_var }
							check_variable = { SUS_red_var > SUS_yellow_var }
							check_variable = { SUS_red_var > SUS_green_var }
							check_variable = { SUS_red_var > SUS_blue_var }
							check_variable = { SUS_red_var > SUS_indigo_var }
							check_variable = { SUS_red_var > SUS_purple_var }
						}
					}
				}
				SUS = {
					remove_ideas = {
						SUS_pillars_outsiders_dominate
						SUS_pillars_labourists_dominate
					}
					set_country_flag = SUS_pillars_balance_nobody
				}
			}
		}
	}
	on_weekly_SUS = { #SUS Pillars Mechanic
        effect = {
            SUS = {
                set_variable = {
                    var = SUS_senate_political_power_factor
                    value = SUS_senate_trust
                }
                set_variable = {
                    var = SUS_senate_stability_factor
                    value = SUS_senate_trust
                }
                set_variable = {
                    var = SUS_senate_war_support_factor
                    value = SUS_senate_trust
                }
                set_variable = {
                    var = SUS_senate_resistance_activity
                    value = SUS_senate_trust
                }
				divide_variable = {
					var = SUS_senate_political_power_factor
					value = 400
				}
				divide_variable = {
					var = SUS_senate_stability_factor
					value = 400
				}
				divide_variable = {
					var = SUS_senate_war_support_factor
					value = 400
				}
				divide_variable = {
					var = SUS_senate_resistance_activity
					value = -400
				}
			}
		}
	}
}					  